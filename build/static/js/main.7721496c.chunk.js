(this["webpackJsonpusers-places"]=this["webpackJsonpusers-places"]||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports={Progress:"BioData_Progress__DjZj4",outerDiv:"BioData_outerDiv__ksWFn",imgChooser:"BioData_imgChooser__1NYRa",inputDiv:"BioData_inputDiv__8931O",selector:"BioData_selector__10DRo",tArea:"BioData_tArea__1a92B",dob:"BioData_dob__2ypAh",CNICdate:"BioData_CNICdate__JmfzN","react-datepicker":"BioData_react-datepicker__3GsPk",calendar:"BioData_calendar__118yq",games:"BioData_games__3ylZh",submitBtn:"BioData_submitBtn__1QHMF",fieldsetDiv:"BioData_fieldsetDiv__3Lks7"}},,,,function(e,t,a){e.exports={navLinks:"NavLinks_navLinks__3IBt2",navLink:"NavLinks_navLink__1WspY"}},,function(e,t,a){e.exports={center:"NewPlaces_center__1SEUG",addPlaceFORM:"NewPlaces_addPlaceFORM__3E0Bt"}},,,function(e,t,a){e.exports={menuBtn:"MainNavigation_menuBtn__1hs83",mainNavTitle:"MainNavigation_mainNavTitle__3rW2_",navLinks:"MainNavigation_navLinks__2eFWS"}},,,,,function(e,t,a){e.exports={inputControl:"Input_inputControl__2XYLL",labelControl:"Input_labelControl__22k8e",gYellow:"Input_gYellow__1bi96"}},function(e,t,a){e.exports={user_item:"UserItem_user_item__1N6Lr",user_item_image:"UserItem_user_item_image__3EFbW",user_item_info:"UserItem_user_item_info__1v_Kf"}},function(e,t,a){e.exports={onePlace:"PlaceItem_onePlace__gNjSM",description:"PlaceItem_description__LMc0K",onePlaceBtns:"PlaceItem_onePlaceBtns__gd0W8"}},function(e,t,a){e.exports={spinnerCenter:"PlaceDetail_spinnerCenter__PqZ8U",center:"PlaceDetail_center__33XWM",placeDetail:"PlaceDetail_placeDetail__3nNJA"}},,function(e,t,a){e.exports={ldsDualRing:"Spinner_ldsDualRing__E8sB_","lds-dual-ring":"Spinner_lds-dual-ring__2Svn6",loadingSpinner__overlay:"Spinner_loadingSpinner__overlay__1EoTJ"}},function(e,t,a){e.exports={center:"LoginForm_center__3M7Wr",addPlaceFORM:"LoginForm_addPlaceFORM__23JLt"}},,function(e,t,a){e.exports={center:"SignUpFrom_center__1sby5",signUpMainForm:"SignUpFrom_signUpMainForm__3i0CQ"}},,,function(e,t,a){e.exports={center:"UserList_center__TJp7q",oneUser:"UserList_oneUser__2WYP8"}},function(e,t,a){e.exports={center:"UserPlaces_center__C4WQf",spinnerCenter:"UserPlaces_spinnerCenter__UQu6w"}},,,,,function(e,t,a){e.exports={backdrop:"Backdrop_backdrop__2EI8Y"}},,function(e,t,a){e.exports={imgDiv:"ImageInput_imgDiv__3eLb8"}},function(e,t,a){e.exports={center:"Users_center__1GAmZ"}},function(e,t,a){e.exports={card:"Card_card__3P3gi"}},function(e,t,a){e.exports={mapDiv:"Modal_mapDiv__b-qfc"}},function(e,t,a){e.exports={placesList:"PlacesList_placesList__1miOf"}},function(e,t,a){e.exports={mainHeader:"MainHeader_mainHeader__2tugc"}},function(e,t,a){e.exports={sideDrawer:"SideDrawer_sideDrawer__18ntV"}},,,function(e,t,a){e.exports=a(68)},,,,,function(e,t,a){},,,,,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),i=a.n(c),s=(a(58),a(2)),o=a(7),u=a(8),m=a(5),p=a.n(m),d=a(9),E=a(4),b=a(41),f=function(e){return{type:"MIN_LENGTH",value:e}},g=function(e){return{type:"MAX_LENGTH",value:e}},h=function(e,t){var a=!0;if(t){var n,r=Object(b.a)(t);try{for(r.s();!(n=r.n()).done;){var l=n.value;"REQUIRE"===l.type&&(a=a&&e.trim().length>0),"MIN_LENGTH"===l.type&&(a=a&&e.trim().length>=l.value),"MAX_LENGTH"===l.type&&(a=a&&e.trim().length<=l.value),"EMAIL"===l.type&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){r.e(c)}finally{r.f()}}return a},v=a(25),_=a.n(v),I=function(e,t){switch(t.type){case"CHANGE":return Object(E.a)(Object(E.a)({},e),{},{inputValue:t.val,inputIsValid:h(t.val,t.validators)});case"TOUCH":return Object(E.a)(Object(E.a)({},e),{},{touched:!0});default:return Object(E.a)({},e)}},N=function(e){var t,a;e.rClass?t=a=_.a.gYellow:(a=_.a.inputControl,t=_.a.labelControl);var n=Object(r.useReducer)(I,{inputValue:e.initialValue||"",inputIsValid:e.isValid||!1,touched:!1}),c=Object(s.a)(n,2),i=c[0],o=c[1],u=function(t){o({type:"CHANGE",val:t.target.value,validators:e.validators})},m=function(e){o({type:"TOUCH"})},p=null;p="Input"===e.type?l.a.createElement("input",{className:!i.inputIsValid&&i.touched?a:null,type:e.fieldType||"text",placeholder:e.pHolder,value:i.inputValue,onBlur:m,onChange:u}):l.a.createElement("textarea",{className:!i.inputIsValid&&i.touched?a:null,type:"text",rows:"5",wrap:"hard",placeholder:e.pHolder,value:i.inputValue,onBlur:m,onChange:u});var d=e.onInputChange,E=e.id,b=i.inputValue,f=i.inputIsValid;return Object(r.useEffect)((function(){d(E,b,f)}),[E,b,f,d]),l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{className:"".concat(!i.inputIsValid&&i.touched&&t)},l.a.createElement("b",null,e.Label)),p,!i.inputIsValid&&i.touched&&l.a.createElement("p",{className:t},e.Error))},O=a(30),C=a.n(O),P=function(e){return l.a.createElement("div",{className:"".concat(e.asOverlay&&C.a.loadingSpinner__overlay)},l.a.createElement("div",{className:C.a.ldsDualRing}))},j=a(42),D=a.n(j),k=function(e){return l.a.createElement("div",{className:D.a.backdrop,onClick:e.backdropClicked},e.children)},w=Object(r.createContext)({loggedIn:!1,userId:null,userImage:"Users Places",userToken:null,login:function(){},logout:function(){}}),x=a(23),S=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)a=n===t.id?a&&t.inputIsValid:a&&e.inputs[n].inputIsValid;return Object(E.a)(Object(E.a)({},e),{},{inputs:Object(E.a)(Object(E.a)({},e.inputs),{},Object(x.a)({},t.id,{inputValue:t.inputValue,inputIsValid:t.inputIsValid})),formIsValid:a});case"SET_DATA":return{inputs:t.inputsValues,formIsValid:t.ValidForm};default:return e}},y=function(e,t){var a=Object(r.useReducer)(S,{inputs:e,formIsValid:t}),n=Object(s.a)(a,2),l=n[0],c=n[1];return[l,Object(r.useCallback)((function(e,t,a){c({type:"INPUT_CHANGE",id:e,inputValue:t,inputIsValid:a})}),[]),Object(r.useCallback)((function(e,t){c({type:"SET_DATA",inputsValues:e,ValidForm:t})}),[])]},L=a(31),V=a.n(L),T=function(){var e=Object(r.useContext)(w),t=Object(r.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],i=y({email:{inputValue:"",inputisValid:!1},password:{inputValue:"",inputisValid:!1}},!1),o=Object(s.a)(i,2),u=o[0],m=o[1],E=function(){var t=Object(d.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),a.preventDefault(),t.prev=2,t.next=5,fetch("https://sandral-app.herokuapp.com/api".split(";")[0].split(";")[0]+"/users/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.inputs.email.inputValue,password:u.inputs.password.inputValue})});case 5:return n=t.sent,t.next=8,n.json();case 8:r=t.sent,n.ok?(c(!1),e.login(r.U_ID,r.U_Image,r.U_Token)):(c(!1),alert(r.errorCode+"\n"+r.errorMsg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),c(!1),alert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return l.a.createElement("div",{className:V.a.center},n&&l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("h2",{style:{color:"gold"}},"Signing In")),l.a.createElement("form",{className:V.a.addPlaceFORM,onSubmit:E},l.a.createElement("h3",{style:{alignSelf:"center"}},"SignIn"),l.a.createElement(N,{id:"email",type:"Input",fieldType:"email",Label:"Email",pHolder:"Enter Email Address",rClass:"gYellow",Error:"Please Enter a Valid Email",onInputChange:m,validators:[{type:"EMAIL"}]}),l.a.createElement(N,{id:"password",type:"Input",fieldType:"password",Label:"Password",pHolder:"Enter Password",rClass:"gYellow",Error:"Password Field is Required",onInputChange:m,validators:[f(1)]}),l.a.createElement("button",{className:"btn btn-outline-success p-2 mt-3",disabled:!u.formIsValid},"LOG IN")))},M=a(6),A=a(44),U=a.n(A),F=function(e){var t=Object(r.useState)(),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(),o=Object(s.a)(i,2),u=o[0],m=o[1],p=Object(r.useRef)();Object(r.useEffect)((function(){if(n){var e=new FileReader;e.readAsDataURL(n),e.onload=function(){m(e.result)}}}),[n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{id:e.id,type:"file",ref:p,accept:".jpg, .jpeg, .png,",style:{display:"none"},onChange:function(t){var a,r;if(t.target.files&&1===t.target.files.length)a=t.target.files[0],c(a),a.size>5242880&&alert("WARRNING \nImage is too Large\nPlease Replace with another one\nMAXIMUM IMAGE SIZE = ".concat(e.maxSize||5,"MB")),r=!0;else{if(n)return;r=!1}e.onInputChange(e.id,a,r)}}),l.a.createElement("div",{className:U.a.imgDiv},l.a.createElement("button",{type:"button",onClick:function(){p.current.click()}},u&&l.a.createElement("img",{src:u,style:{maxHeight:e.height},alt:"PREVIEW"}),!u&&l.a.createElement("b",null,l.a.createElement("p",{style:{maxHeight:e.height}},"Please Pick an Image")))))},H=a(33),B=a.n(H),R=function(){var e=Object(r.useContext)(w),t=Object(M.b)(),a=Object(r.useState)(!1),n=Object(s.a)(a,2),c=n[0],i=n[1],o=y({userName:{inputValue:"",inputisValid:!1},userImage:{inputValue:"",inputisValid:!1},email:{inputValue:"",inputisValid:!1},password:{inputValue:"",inputisValid:!1},conform_password:{inputValue:"",inputisValid:!1}},!1),u=Object(s.a)(o,2),m=u[0],E=u[1],b=function(){var a=Object(d.a)(p.a.mark((function a(n){var r,l,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),m.inputs.password.inputValue!==m.inputs.conform_password.inputValue){a.next=28;break}if(!(m.inputs.userImage.inputValue.size>3145728)){a.next=5;break}return alert("Please Select An Image With Size Less than 3MB"),a.abrupt("return");case 5:return i(!0),a.prev=6,(r=new FormData).append("name",m.inputs.userName.inputValue),r.append("email",m.inputs.email.inputValue),r.append("password",m.inputs.password.inputValue),r.append("userImage",m.inputs.userImage.inputValue),a.next=14,fetch("https://sandral-app.herokuapp.com/api".split(";")[0]+"/users/signup",{method:"POST",body:r});case 14:return l=a.sent,a.next=17,l.json();case 17:c=a.sent,l.ok?(i(!1),t({type:"SIGN_UP"}),e.login(c.U_ID,c.U_Image,c.U_Token)):(i(!1),alert(c.errorCode+"\n"+c.errorMsg)),a.next=26;break;case 21:a.prev=21,a.t0=a.catch(6),i(!1),console.dir(a.t0),alert(a.t0);case 26:a.next=29;break;case 28:alert("Passwords Do not Match");case 29:case"end":return a.stop()}}),a,null,[[6,21]])})));return function(e){return a.apply(this,arguments)}}();return l.a.createElement("div",{className:B.a.center},c&&l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("h2",{style:{color:"gold"}},"Signing Up")),l.a.createElement("form",{className:B.a.signUpMainForm,onSubmit:b},l.a.createElement("h3",{style:{alignSelf:"center"}},"SignUp"),l.a.createElement("div",{className:"row align-items-center px-md-2"},l.a.createElement("div",{className:"col-md-6 col-12 order-md-2"},l.a.createElement(F,{id:"userImage",Error:"Please Pick an Image",height:"200px",maxSize:3,onInputChange:E})),l.a.createElement("div",{className:"col-md-6 col-12 order-md-1"},l.a.createElement(N,{id:"userName",type:"Input",fieldType:"text",Label:"Name",pHolder:"Enter Your Name",rClass:"gYellow",Error:"Name Field is Required with MAXIMUM LENGTH of 25 Words",onInputChange:E,validators:[f(1),g(25)]}),l.a.createElement(N,{id:"email",type:"Input",fieldType:"email",Label:"Email",pHolder:"Enter Email Address",rClass:"gYellow",Error:"Please Enter a Valid Email",onInputChange:E,validators:[{type:"EMAIL"}]}))),l.a.createElement("div",{className:"row p-md-2"},l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(N,{id:"password",type:"Input",fieldType:"password",Label:"Password",pHolder:"Enter Password",rClass:"gYellow",Error:"Password Field is Required with MAXIMUM LENGTH of 15 Words",onInputChange:E,validators:[f(1),g(15)]})),l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(N,{id:"conform_password",type:"Input",fieldType:"password",Label:"Conform Password",pHolder:"Enter Password",rClass:"gYellow",Error:"Password Field is Required with MAXIMUM LENGTH of 15 Words",onInputChange:E,validators:[f(1),g(15)]}))),l.a.createElement("button",{className:"btn btn-outline-success p-2 mt-3 mx-md-2",disabled:!m.formIsValid},"SIGN UP")))},G=a(26),Y=a.n(G),W=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:Y.a.user_item},l.a.createElement(u.b,{to:"/".concat(e.id,"/places")},l.a.createElement("div",{className:Y.a.user_item_image},l.a.createElement("img",{src:e.image,alt:""})),l.a.createElement("div",{className:Y.a.user_item_info},l.a.createElement("b",null,l.a.createElement("p",null,e.name)),l.a.createElement("b",null,l.a.createElement("p",null," ",e.totalPlaces," ",e.totalPlaces<="1"?"Place":"Places"))))))},X=a(36),J=a.n(X),q=function(e){return 0===e.users.length?l.a.createElement("div",{className:J.a.center},l.a.createElement("h2",{style:{color:"white"}},"No User Found")):l.a.createElement("div",{className:J.a.oneUser},l.a.createElement("ul",null,e.users.map((function(e){return l.a.createElement(W,{key:e.U_ID,id:e.U_ID,name:e.U_Name,image:e.U_Image,totalPlaces:e.U_Places})}))))},z=a(45),Q=a.n(z),K=function(e){var t=Object(r.useState)(),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(M.c)((function(e){return e.allUsers})),o=Object(M.c)((function(e){return e.usersFetched})),u=Object(r.useState)(!o),m=Object(s.a)(u,2),E=m[0],b=m[1],f=Object(M.b)(),g=Object(r.useCallback)(Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://sandral-app.herokuapp.com/api".split(";")[0]+"/users");case 3:return t=e.sent,e.next=6,t.json();case 6:if(a=e.sent,b(!1),!t.ok){e.next=12;break}f({type:"USERS_FETCHED",value:a}),e.next=13;break;case 12:throw new Error(a.errorMsg);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),c(e.t0.message),b(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),[f]);return Object(r.useEffect)((function(){o||g()}),[o,g]),l.a.createElement(l.a.Fragment,null,E&&l.a.createElement("div",{className:Q.a.center},l.a.createElement(P,null),l.a.createElement("h2",null,"Loading...")),!E&&l.a.createElement("div",null,l.a.createElement(q,{users:i,error:n})))},Z=a(17),$=a.n(Z),ee=function(){var e=Object(M.b)(),t=Object(r.useContext)(w),a=t.userId,n=Object(o.g)(),c=Object(r.useState)(!1),i=Object(s.a)(c,2),u=i[0],m=i[1],E=y({title:{inputValue:"",inputisValid:!1},address:{inputValue:"",inputisValid:!1},description:{inputValue:"",inputisValid:!1},newPlaceImage:{inputValue:"",inputisValid:!1}},!1),b=Object(s.a)(E,2),h=b[0],v=b[1],_=function(){var r=Object(d.a)(p.a.mark((function r(l){var c,i,s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.preventDefault(),!(h.inputs.newPlaceImage.inputValue.size>5242880)){r.next=4;break}return alert("Please Select An Image With Size Less than 5MB"),r.abrupt("return");case 4:return m(!0),r.prev=5,(c=new FormData).append("title",h.inputs.title.inputValue),c.append("address",h.inputs.address.inputValue),c.append("description",h.inputs.description.inputValue),c.append("creator",a),c.append("newPlaceImage",h.inputs.newPlaceImage.inputValue),r.next=14,fetch("https://sandral-app.herokuapp.com/api".split(";")[0]+"/places",{method:"POST",headers:{Authorization:"Bearer "+t.userToken},body:c});case 14:return i=r.sent,r.next=17,i.json();case 17:s=r.sent,i.ok?(m(!1),e({type:"NEW_PLACE_ADDED"}),n.push("/".concat(a,"/places"))):(m(!1),n.push("/"),alert(s.errorCode+"\n"+s.errorMsg)),r.next=25;break;case 21:r.prev=21,r.t0=r.catch(5),m(!1),alert(r.t0);case 25:case"end":return r.stop()}}),r,null,[[5,21]])})));return function(e){return r.apply(this,arguments)}}();return l.a.createElement("div",{className:$.a.center},u&&l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("h2",{style:{color:"gold"}},"Adding New Place...")),l.a.createElement("form",{className:$.a.addPlaceFORM,onSubmit:_},l.a.createElement(F,{id:"newPlaceImage",Error:"Please Pick an Image",height:"300px",onInputChange:v}),l.a.createElement(N,{id:"title",type:"Input",Label:"Title",pHolder:"Enter The Name of Place",Error:"Please Enter a Valid Title with MINIMUM LENGTH of 5 and MAXIMUM LENGTH of 50 Words",onInputChange:v,validators:[f(5),g(50)]}),l.a.createElement(N,{id:"address",type:"Input",Label:"Address",pHolder:"Enter The Address of Place",Error:"Please Enter a Valid Address with MINIMUM LENGTH of 5 and MAXIMUM LENGTH of 80 Words",onInputChange:v,validators:[f(5),g(80)]}),l.a.createElement(N,{id:"description",type:"textArea",Label:"Description",pHolder:"Enter Description for Selected Place",Error:"Please Enter a Valid Description with MINIMUM LENGTH of 5",onInputChange:v,validators:[f(5)]}),l.a.createElement("button",{disabled:!h.formIsValid,className:"btn ".concat(h.formIsValid?"btn-outline-success":"btn-danger")},"ADD PLACE")))},te=a(46),ae=a.n(te),ne=function(e){return l.a.createElement("div",{className:ae.a.card,style:e.style},e.children)},re=a(47),le=a.n(re),ce=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:e.changeModalState},l.a.createElement(k,null)),l.a.createElement("div",{className:le.a.mapDiv},l.a.createElement("header",null,e.modalHeader),l.a.createElement("main",null,e.modalMain),l.a.createElement("footer",null,e.mapModal&&l.a.createElement("button",{onClick:e.changeModalState},"CLOSE"),e.deleteModal&&l.a.createElement("button",{onClick:e.changeModalState},"CANCEL"),e.deleteModal&&l.a.createElement("button",{onClick:e.deletePlace},"DELETE"))))},ie=a(27),se=a.n(ie),oe=function(e){var t=Object(M.b)(),a=Object(r.useContext)(w),n=Object(o.h)().uid,c=Object(r.useState)(!1),i=Object(s.a)(c,2),m=i[0],E=i[1],b=Object(r.useState)(!1),f=Object(s.a)(b,2),g=f[0],h=f[1],v=function(){h(!g)},_=function(){var n=Object(d.a)(p.a.mark((function n(){var r,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return E(!0),n.prev=1,n.next=4,fetch("".concat("https://sandral-app.herokuapp.com/api".split(";")[0],"/places/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.userToken}});case 4:return r=n.sent,n.next=7,r.json();case 7:l=n.sent,r.ok?(E(!1),t({type:"PLACE_DELETED"}),e.onDelete()):(E(!1),v(),alert(l.errorCode+"\n"+l.errorMsg)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),E(!1),alert(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}(),I=l.a.createElement("h4",null,"Are You Sure"),N=l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Do You Want to proceed For Deleting The Specified Place "),l.a.createElement("p",{style:{border:"3px solid #c20e0e4c "}},l.a.createElement("b",null,"Caution : "),"Once a Place is Deleted It cannot be Undone"));return l.a.createElement(l.a.Fragment,null,g&&l.a.createElement(ce,{modalHeader:I,modalMain:N,deleteModal:!0,changeModalState:v,deletePlace:_}),m&&l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("h2",{style:{color:"gold"}},"Deleting Place...")),l.a.createElement("li",null,l.a.createElement("div",{className:se.a.onePlace},l.a.createElement("div",null,l.a.createElement("img",{src:e.image,alt:""})),l.a.createElement("div",{className:se.a.description},l.a.createElement("h4",null,e.title),l.a.createElement("h5",null,e.address)),l.a.createElement("hr",null),l.a.createElement("div",{className:se.a.onePlaceBtns},l.a.createElement(u.b,{to:"/places/".concat(e.id,"/detail")},l.a.createElement("button",{className:"btn btn-dark m-1"},"VIEW DETAIL")),a.userId===n&&l.a.createElement("button",{className:"btn btn-danger m-1",onClick:v},"DELETE")))))},ue=a(48),me=a.n(ue),pe=function(e){return 0===e.userPlaces.length?l.a.createElement(ne,null,l.a.createElement("h4",null,"No Place Found... ")):l.a.createElement("ul",{className:me.a.placesList},e.userPlaces.map((function(t){return l.a.createElement(oe,{key:t.P_ID,id:t.P_ID,image:t.P_Image,title:t.P_Title,desc:t.P_Description,address:t.P_Address,creator:t.creator,onDelete:e.onDeletePlace})})))},de=a(37),Ee=a.n(de),be=function(e){var t=Object(r.useState)(),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(M.c)((function(e){return e.placesFetched})),u=Object(r.useState)(!i),m=Object(s.a)(u,2),E=m[0],b=m[1],f=Object(o.h)().uid,g=Object(M.b)(),h=Object(M.c)((function(e){return e.allPlaces.filter((function(e){return e.userUID.toString()===f}))})),v=Object(r.useCallback)(Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://sandral-app.herokuapp.com/api".split(";")[0],"/places"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,b(!1),t.ok&&g({type:"PLACES_FETCHED",value:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0.message),b(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[g]);return Object(r.useEffect)((function(){i||v()}),[i,v]),l.a.createElement(l.a.Fragment,null,E&&l.a.createElement("div",{className:Ee.a.spinnerCenter},l.a.createElement(P,null),l.a.createElement("h2",null,"Loading...")),!E&&l.a.createElement("div",{className:Ee.a.center},l.a.createElement(pe,{userPlaces:h,onDeletePlace:function(){b(!0),v()},error:n})))},fe=function(e){var t=Object(M.b)(),a=Object(r.useContext)(w),n=Object(o.g)(),c=a.userId,i=Object(o.h)().pID,u=Object(r.useState)(),m=Object(s.a)(u,2),E=m[0],b=m[1],g=Object(r.useState)(!1),h=Object(s.a)(g,2),v=h[0],_=h[1],I=Object(M.c)((function(e){return e.allPlaces.find((function(e){return e.P_ID.toString()===i}))})),O=y({title:{inputValue:"",inputisValid:!1},description:{inputValue:"",inputisValid:!1}},!1),C=Object(s.a)(O,3),j=C[0],D=C[1],x=C[2],S=Object(r.useCallback)(Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I&&(x({title:{inputValue:I.P_Title,inputisValid:!0},description:{inputValue:I.P_Description,inputisValid:!0}},!0),b(I));case 1:case"end":return e.stop()}}),e)}))),[I,x]);Object(r.useEffect)((function(){S()}),[S]);var L=function(){var e=Object(d.a)(p.a.mark((function e(r){var l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,_(!0),e.next=5,fetch("".concat("https://sandral-app.herokuapp.com/api".split(";")[0],"/places/").concat(i),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.userToken+"s"},body:JSON.stringify({title:j.inputs.title.inputValue,description:j.inputs.description.inputValue})});case 5:return l=e.sent,e.next=8,l.json();case 8:s=e.sent,l.ok?(_(!1),t({type:"PLACE_UPDATED"}),n.push("/".concat(c,"/places"))):(401===s.errorCode&&a.logout(),_(!1),n.push("/".concat(c,"/places")),alert(s.errorCode+"\n"+s.errorMsg)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),_(!1),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return E?l.a.createElement("div",{className:$.a.center},v&&l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("h2",{style:{color:"gold"}},"Updating...")),l.a.createElement("form",{className:$.a.addPlaceFORM,onSubmit:L},l.a.createElement(N,{id:"title",type:"Input",Label:"Title",initialValue:j.inputs.title.inputValue,pHolder:"Enter The Name of Place",isValid:j.inputs.title.inputisValid,Error:"Please Enter a Valid Title with MINIMUM LENGTH of 5",onInputChange:D,validators:[f(5)]}),l.a.createElement(N,{id:"description",type:"TextArea",Label:"Description",initialValue:j.inputs.description.inputValue,pHolder:"Enter Description for Selected Place",isValid:j.inputs.description.inputisValid,Error:"Please Enter a Valid Description with MINIMUM LENGTH of 5",onInputChange:D,validators:[f(5)]}),l.a.createElement("button",{disabled:!j.formIsValid,className:"btn ".concat(j.formIsValid?"btn-outline-success":"btn-danger")},"UPDATE PLACE"))):l.a.createElement(ne,null,"   ",l.a.createElement("h4",null,"Loading..."),"  ")},ge=a(28),he=a.n(ge),ve=function(e){var t,a=Object(o.h)().pID,n=Object(r.useContext)(w),c=Object(M.b)();return(t=Object(M.c)((function(e){return e.allPlaces.find((function(e){return e.P_ID.toString()===a}))})))||function(){var e=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://sandral-app.herokuapp.com/api".split(";")[0],"/places"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,t.ok&&c({type:"PLACES_FETCHED",value:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()(),t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:he.a.center},l.a.createElement("div",{className:"row  ".concat(he.a.placeDetail)},l.a.createElement("div",{className:"col-12 p-0"},l.a.createElement("img",{src:t.P_Image,alt:""})),l.a.createElement("div",{className:"col-12 text-center pt-3"},l.a.createElement("h4",null,t.P_Title)),l.a.createElement("div",{className:"col-12 text-center pt-3"},l.a.createElement("h5",null,t.P_Address)),l.a.createElement("div",{className:"col-12 text-center pt-3"},l.a.createElement("p",{style:{whiteSpace:"pre-wrap",textAlign:"left"}},t.P_Description)),l.a.createElement("div",{className:"row w-100 m-0 justify-content-center"},n.userId===t.userUID.toString()&&l.a.createElement("div",{className:"col-12 col-md-6 pl-md-1 order-md-1"},l.a.createElement(u.b,{to:"/places/".concat(t.P_ID,"/update")},l.a.createElement("button",{className:"btn btn-success w-100 mb-2"},"EDIT"))),l.a.createElement("div",{className:"col-12 col-md-6 pr-md-1  "},l.a.createElement(u.b,{to:"/".concat(t.userUID,"/places")},l.a.createElement("button",{className:"btn btn-outline-dark w-100 mb-2"},"GO BACK"))))))):l.a.createElement("div",{className:he.a.spinnerCenter},l.a.createElement(P,null),l.a.createElement("h2",null,"Loading..."))},_e=a(49),Ie=a.n(_e),Ne=function(e){return l.a.createElement("header",{className:Ie.a.mainHeader},e.children)},Oe=a(15),Ce=a.n(Oe),Pe=function(e){var t=Object(r.useContext)(w),a=t.userId;return l.a.createElement("ul",{className:Ce.a.navLinks},l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/"},"ALL USERS")),t.loggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/".concat(a,"/places")},"MY PLACES")),l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/places/new"},"ADD PLACE")),l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/",onClick:function(){t.logout()}},"SIGN OUT"))),!t.loggedIn&&l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/login"},"SIGN IN")),l.a.createElement("li",{className:Ce.a.navLink},l.a.createElement(u.c,{to:"/signup"},"SIGN UP"))))},je=a(50),De=a.n(je),ke=function(e){return l.a.createElement("div",{className:De.a.sideDrawer,onClick:e.drawerClicked},l.a.createElement(Pe,null))},we=a(20),xe=a.n(we),Se=function(){var e=Object(r.useContext)(w),t=e.userImage,a=Object(r.useState)(!1),n=Object(s.a)(a,2),c=n[0],i=n[1],o=function(){i(!c)},m=l.a.createElement("div",{className:xe.a.sideDrawer},l.a.createElement(ke,{drawerClicked:o}),l.a.createElement(k,{backdropClicked:o})),p=e.loggedIn?l.a.createElement("img",{src:t,alt:""}):l.a.createElement("b",null,"USER PLACES");return l.a.createElement(Ne,null,c?m:null,l.a.createElement("button",{className:xe.a.menuBtn,onClick:o},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement("div",{className:xe.a.mainNavTitle},l.a.createElement(u.b,{to:""},p)),l.a.createElement("div",{className:xe.a.navLinks},l.a.createElement(Pe,null)))},ye=a(52),Le=a(51),Ve=a(11),Te=a.n(Ve),Me=(a(65),function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useState)(),c=Object(s.a)(n,2),i=c[0],o=c[1],u=Object(r.useState)(),m=Object(s.a)(u,2),p=m[0],d=m[1],b=Object(r.useState)(0),f=Object(s.a)(b,2),g=f[0],h=f[1],v=Object(r.useState)(),_=Object(s.a)(v,2),I=_[0],N=_[1],O=Object(r.useState)({fName:"",lName:"",image:"",CNIC:"",CNICDate:"",phNumber:"",email:"",province:"",relegion:"",description:"",qualification:"",DOB:"Please Choose Your Date Of Birth",languages:[],gender:"",password:"",cPassword:"",games:[]}),C=Object(s.a)(O,2),P=C[0],j=C[1],D=function(e,t){if(t){var a=Object(E.a)({},P);a[t]=e.target?e.target.value:e,console.log(a[t]),j(a)}},k=function(e,t,a,n,r,c,i,s){return l.a.createElement("div",{className:Te.a.inputDiv},l.a.createElement("label",{htmlFor:e},t),l.a.createElement("input",{placeholder:a,minLength:n,maxLength:r,id:e,name:e,type:c,required:i,pattern:s,list:e+"list",onChange:function(t){return D(t,e)}}))},w=function(e,t,a,n,r){return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{type:e,id:t,name:a,value:n}),l.a.createElement("label",{htmlFor:t},r)," ",l.a.createElement("br",null))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:Te.a.outerDiv},l.a.createElement("input",{ref:t,type:"file",onChange:function(){N(!0),h(0),console.log(g);var e=t.current.files[0],a=new FileReader,n=Object(E.a)({},P);a.onprogress=function(e){h((e.loaded/e.total*100).toFixed(0))},a.onloadend=function(e){n.image=a.result,j(n),N(!1)},e&&a.readAsDataURL(e)},accept:".jpg, .jpeg, .png",style:{display:"none"}}),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(P)}},l.a.createElement("h3",null,"Enter Your Bio Data"),l.a.createElement("div",{className:Te.a.imgChooser,onClick:function(){t.current.click()}},P.image&&!I?l.a.createElement("img",{src:P.image,alt:"DP"}):l.a.createElement("b",null,"Please Choose an Image"),I&&l.a.createElement("div",{className:Te.a.Progress},l.a.createElement("div",{style:{width:g+"%"}},l.a.createElement("b",null,g,"%")))),k("fName","First Name","Enter Your First Name",5,40,"text",!0),k("lName","Last Name","Enter Your Last Name",5,40,"text",!0),k("CNIC","CNIC","XXXXX-XXXXXXX-X",15,15,"text",!0,"^[0-9+]{5}-[0-9+]{7}-[0-9]{1}$"),k("CNICDate","CNIC Issuance Date and Time","Please Choose A Date and Time",5,15,"datetime-local",!0),k("phNumber","Mobile","03xx-xxxxxxx",12,12,"text",!0,"03[0-9]{2}-[0-9]{7}"),k("email","Email","Enter Your Email",5,50,"email",!0),l.a.createElement("div",{className:Te.a.selector},l.a.createElement("label",null,"Select Your Province or State"),l.a.createElement("select",{required:!0,value:P.province,onChange:function(e){return D(e,"province")}},l.a.createElement("option",{value:""},"Select Your Province"),["AJK","Balochistan","GB","KPK","Sindh","Punjab"].map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))),l.a.createElement("div",{className:Te.a.games},l.a.createElement("label",null,"Select Your Faviourites Games "),l.a.createElement("div",null,l.a.createElement("span",{onClick:function(){return d(!p)}},P.games.length<=0?"Please Select Games":P.games.join()),l.a.createElement("button",{type:"button",onClick:function(){a.current&&(D(Object(ye.a)(a.current.selectedOptions).map((function(e){return e.value})),"games"),d(!p))}},"Select")),p&&l.a.createElement("select",{ref:a,multiple:!0},["Cricket","Hockey","Volleyball","Baseball","Football"].map((function(e){return l.a.createElement("option",{key:e,value:e},e)})))),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Relegion:"),l.a.createElement("div",{className:Te.a.fieldsetDiv,onChange:function(e){return D(e,"relegion")}},w("radio","islam","relegion","Islam","Islam"),w("radio","christianity","relegion","Christianity","Christianity"),w("radio","hinduism","relegion","Hinduism","Hinduism"),w("radio","buddhism","relegion","Buddhism","Buddhism"),w("radio","sikhism","relegion","Sikhism","Sikhism"),w("radio","atheist","relegion","Atheist","Atheist"),w("radio","Other","relegion","Other","Other"))),l.a.createElement("div",null,k("qualification","Enter Your Highest Qualification","Highest Qualification",2,50,"tetx",!0),l.a.createElement("datalist",{id:"qualificationlist"},["Matric","Intermediate","Graduation","Masters","PhD"].map((function(e){return l.a.createElement("option",{key:e,value:e})})))),l.a.createElement("div",null,l.a.createElement("label",null,"Choose Your DOB"),l.a.createElement("div",{className:Te.a.dob},l.a.createElement("p",{onClick:function(){return o(!i)},style:{width:"100%"}},P.DOB||"Choose a Date"," "),i&&l.a.createElement(Le.a,{className:Te.a.calendar,onClickDay:function(e){o(!i),D(e.toLocaleDateString("en-GB"),"DOB")},minDate:e.minDate||new Date("1971, 12, 16")}))),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Favourite Languages:"),l.a.createElement("div",{onChange:function(e){var t=Object(E.a)({},P);t.languages.find((function(t,a,n){return t===e.target.value&&(n.splice(a,1),!0)}))||t.languages.push(e.target.value),j(t)},className:Te.a.fieldsetDiv},w("checkbox","JavaScript","JavaScript","Java Script","Java Script"),w("checkbox","React","React","React","React JS"),w("checkbox","Node","Node","Node","Node JS"),w("checkbox","Python","Python","Python","Python"),w("checkbox","C","C","C","C, C++"))),l.a.createElement("div",{className:Te.a.tArea},l.a.createElement("label",null,"Description"),l.a.createElement("textarea",{value:P.description,onChange:function(e){return D(e,"description")},rows:5})),k("password","Password","Enter Your Password",5,50,"password",!0),k("cPassword","Conform Password","Conform Your Password",5,50,"password",!0),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Gender:"),l.a.createElement("div",{className:Te.a.fieldsetDiv,onChange:function(e){return D(e,"gender")}},w("radio","male","gender","Male","Male"),w("radio","female","gender","Female","Female"),w("radio","other","gender","Other","Other"))),l.a.createElement("button",{className:Te.a.submitBtn,type:"submit"},"SUBMIT DATA"))))}),Ae=(a(66),function(){var e,t=Object(r.useState)(!1),a=Object(s.a)(t,2),c=a[0],i=a[1],m=Object(r.useState)(null),p=Object(s.a)(m,2),d=p[0],E=p[1],b=Object(r.useState)("Users Places"),f=Object(s.a)(b,2),g=f[0],h=f[1],v=Object(r.useState)(),_=Object(s.a)(v,2),I=_[0],N=_[1],O=Object(r.useCallback)((function(e,t,a,n){i(a),E("".concat(e)),h(t);var r=n||new Date((new Date).getTime()+18e5);N(r),localStorage.setItem("userData",JSON.stringify({uId:e,uImage:t,uToken:a,TokenExpiryDate:r.toISOString()}))}),[]),C=Object(r.useCallback)((function(){i(null),N(null),E(null),h("Users Places"),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(c&&I){var e=I.getTime()-(new Date).getTime();n=setTimeout(C,e)}else clearTimeout(n)}),[c,I,C]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.uToken&&new Date(e.TokenExpiryDate)>new Date&&O(e.uId,e.uImage,e.uToken,new Date(e.TokenExpiryDate))}),[O]),e=c?l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/",exact:!0},l.a.createElement(K,null)),l.a.createElement(o.b,{path:"/:uid/places",exact:!0},l.a.createElement(be,null)),l.a.createElement(o.b,{path:"/places/new",exact:!0},l.a.createElement(ee,null)),l.a.createElement(o.b,{path:"/places/:pID/update",exact:!0},l.a.createElement(fe,null)),l.a.createElement(o.b,{path:"/places/:pID/detail",exact:!0},l.a.createElement(ve,null)),l.a.createElement(o.b,{path:"/form",exact:!0},l.a.createElement(Me,null)),l.a.createElement(o.a,{to:"/"})):l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/",exact:!0},l.a.createElement(K,null)),l.a.createElement(o.b,{path:"/login",exact:!0},l.a.createElement(T,null)),l.a.createElement(o.b,{path:"/signup",exact:!0},l.a.createElement(R,null)),l.a.createElement(o.b,{path:"/:uid/places",exact:!0},l.a.createElement(be,null)),l.a.createElement(o.b,{path:"/places/:pID/detail",exact:!0},l.a.createElement(ve,null)),l.a.createElement(o.b,{path:"/form",exact:!0},l.a.createElement(Me,null)),l.a.createElement(o.a,{to:"/login"})),l.a.createElement(w.Provider,{value:{loggedIn:!!c,userId:d,userImage:g,userToken:c,login:O,logout:C}},l.a.createElement(u.a,null,l.a.createElement(Se,null),l.a.createElement("main",null,e)))}),Ue=(a(67),{allUsers:[],allPlaces:[],usersFetched:!1,placesFetched:!1}),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_FETCHED":return Object(E.a)(Object(E.a)({},e),{},{allUsers:t.value,usersFetched:!0});case"PLACES_FETCHED":return Object(E.a)(Object(E.a)({},e),{},{allPlaces:t.value,placesFetched:!0});case"SIGN_UP":return Object(E.a)(Object(E.a)({},e),{},{usersFetched:!1});case"NEW_PLACE_ADDED":case"PLACE_DELETED":return Object(E.a)(Object(E.a)({},e),{},{usersFetched:!1,placesFetched:!1});case"PLACE_UPDATED":return Object(E.a)(Object(E.a)({},e),{},{placesFetched:!1});default:return e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=a(24),Be=Object(He.b)(Fe);i.a.render(l.a.createElement(M.a,{store:Be},l.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[53,1,2]]]);
//# sourceMappingURL=main.7721496c.chunk.js.map